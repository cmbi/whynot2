version: "2"

services:

  frontend:
    command: watchmedo auto-restart -d /usr/src/app -p "*.py" -D -R -- gunicorn -k gevent -b 0.0.0.0:15000 whynot.application:app
    environment:
      - WHYNOT_SETTINGS=/usr/src/app/dev_settings.py
    volumes:
      - ".:/usr/src/app"

  celery:
    command: watchmedo auto-restart -d /usr/src/app -p "*.py" -D -R -- celery -A whynot.application:celery worker -B
    environment:
      - WHYNOT_SETTINGS=/usr/src/app/dev_settings.py
    volumes:
      - ".:/usr/src/app"
